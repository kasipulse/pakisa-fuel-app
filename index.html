<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Drivers</title>
</head>
<body>
  <h1>Driver List</h1>
  <div id="driver-list">Loading...</div>

  <script type="module">
    import { createClient } from 'https://esm.sh/@supabase/supabase-js'

    // üîë Replace these with your own Supabase details
    const supabaseUrl = "https://YOUR_PROJECT_ID.supabase.co"
    const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNmdm9wdGRkZXJ1bHdycGR5d21iIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgxNzY4NjAsImV4cCI6MjA3Mzc1Mjg2MH0.bHy_aZ9TOGLfanG6-xNb3HykxwpWAiUNOcfBbvN-OME"
    const supabase = createClient(supabaseUrl, supabaseKey)

    async function loadDrivers() {
      const driverList = document.getElementById("driver-list")

      try {
        // fetch all rows
        const { data, error } = await supabase
          .from("drivers")
          .select("id, name, phone")

        if (error) {
          console.error(error)
          driverList.innerHTML = "‚ùå Error fetching drivers"
          return
        }

        if (!data || data.length === 0) {
          driverList.innerHTML = "‚ö†Ô∏è No drivers found in Supabase"
          return
        }

        // show drivers
        driverList.innerHTML = data.map(d =>
          `<p><b>${d.name}</b> (${d.phone}) - ID: ${d.id}</p>`
        ).join("")
      } catch (err) {
        console.error(err)
        driverList.innerHTML = "‚ùå Unexpected error"
      }
    }

    loadDrivers()
  </script>
</body>
</html>
